import{s as Ce,n as me,e as He,o as Le,f as ve,r as Me}from"../chunks/scheduler.838288f8.js";import{S as we,i as ye,s as y,g as u,B as Se,f as c,c as S,h as b,j as m,z as ee,k as v,a as B,x as a,m as G,n as z,o as W,D as Ae,y as pe,H as Re,E as Ne}from"../chunks/index.8488c2c6.js";import{g as Oe,f as je,e as ge,s as qe}from"../chunks/Constants.50a37d1d.js";import{b as Ie}from"../chunks/paths.017296e8.js";import{p as Pe}from"../chunks/stores.12a8f660.js";const{document:de}=Oe;function Ee(i,l,n){const s=i.slice();return s[13]=l[n],s}function Ve(i){let l,n='<div class="nucleobase svelte-1lb7jbv"></div> <div class="nucleobase svelte-1lb7jbv"></div> <div class="nucleobase svelte-1lb7jbv"></div> <div class="nucleobase svelte-1lb7jbv"></div> <div class="nucleobase svelte-1lb7jbv"></div> <div class="nucleobase svelte-1lb7jbv"></div> <div class="nucleobase svelte-1lb7jbv"></div> <div class="nucleobase svelte-1lb7jbv"></div> <div class="nucleobase svelte-1lb7jbv"></div> <div class="nucleobase svelte-1lb7jbv"></div>';return{c(){l=u("div"),l.innerHTML=n,this.h()},l(s){l=b(s,"DIV",{class:!0,"data-svelte-h":!0}),ee(l)!=="svelte-1vxv50n"&&(l.innerHTML=n),this.h()},h(){v(l,"class","DNA_cont svelte-1lb7jbv")},m(s,f){B(s,l,f)},d(s){s&&c(l)}}}function De(i){let l,n,s,f,p=i[2].title+"",g,_,e,t,r,D,T,w,C,A,E='<strong class="svelte-1lb7jbv">Liste de lecture :</strong>',d,h,N,H,R,q,F=i[1].title+"",J,Y,L,V,Z,P=(je[i[1].start.split("T")[0]]??i[1].start.split("T")[0])+"",U,K,O,X,$=i[1].start.split("T")[1].split("+")[0]+" - "+i[1].end.split("T")[1].split("+")[0],le,ne,Q=ge(i[3]),I=[];for(let o=0;o<Q.length;o+=1)I[o]=Te(Ee(i,Q,o));let M=i[1].objectives.length>0&&ke(i);return{c(){l=u("div"),n=u("div"),s=u("div"),f=u("strong"),g=G(p),_=y(),e=u("div"),t=u("video"),r=u("track"),w=y(),C=u("div"),A=u("div"),A.innerHTML=E,d=y(),h=u("div");for(let o=0;o<I.length;o+=1)I[o].c();N=y(),H=u("div"),R=u("div"),q=u("h1"),J=G(F),Y=y(),L=u("div"),V=u("div"),Z=G("üóìÔ∏è "),U=G(P),K=y(),O=u("div"),X=G("üï£ "),le=G($),ne=y(),M&&M.c(),this.h()},l(o){l=b(o,"DIV",{class:!0});var k=m(l);n=b(k,"DIV",{class:!0});var j=m(n);s=b(j,"DIV",{class:!0});var x=m(s);f=b(x,"STRONG",{class:!0});var ue=m(f);g=z(ue,p),ue.forEach(c),x.forEach(c),_=S(j),e=b(j,"DIV",{class:!0});var be=m(e);t=b(be,"VIDEO",{class:!0,src:!0,poster:!0});var fe=m(t);r=b(fe,"TRACK",{kind:!0,class:!0}),fe.forEach(c),be.forEach(c),j.forEach(c),w=S(k),C=b(k,"DIV",{class:!0});var te=m(C);A=b(te,"DIV",{class:!0,"data-svelte-h":!0}),ee(A)!=="svelte-1qyb1c1"&&(A.innerHTML=E),d=S(te),h=b(te,"DIV",{class:!0});var he=m(h);for(let ce=0;ce<I.length;ce+=1)I[ce].l(he);he.forEach(c),te.forEach(c),k.forEach(c),N=S(o),H=b(o,"DIV",{class:!0});var se=m(H);R=b(se,"DIV",{class:!0});var ae=m(R);q=b(ae,"H1",{class:!0});var _e=m(q);J=z(_e,F),_e.forEach(c),Y=S(ae),L=b(ae,"DIV",{class:!0});var ie=m(L);V=b(ie,"DIV",{class:!0});var re=m(V);Z=z(re,"üóìÔ∏è "),U=z(re,P),re.forEach(c),K=S(ie),O=b(ie,"DIV",{class:!0});var oe=m(O);X=z(oe,"üï£ "),le=z(oe,$),oe.forEach(c),ie.forEach(c),ae.forEach(c),ne=S(se),M&&M.l(se),se.forEach(c),this.h()},h(){v(f,"class","svelte-1lb7jbv"),v(s,"class","svelte-1lb7jbv"),v(r,"kind","captions"),v(r,"class","svelte-1lb7jbv"),t.controls=!0,v(t,"class","video-player svelte-1lb7jbv"),ve(t.src,D=i[2].url)||v(t,"src",D),v(t,"poster",T=i[2].thumbnail),v(e,"class","video-container svelte-1lb7jbv"),v(n,"class","current-media svelte-1lb7jbv"),v(A,"class","svelte-1lb7jbv"),v(h,"class","playlist svelte-1lb7jbv"),v(C,"class","playlist-container svelte-1lb7jbv"),v(l,"class","media svelte-1lb7jbv"),v(q,"class","svelte-1lb7jbv"),v(V,"class","svelte-1lb7jbv"),v(O,"class","svelte-1lb7jbv"),v(L,"class","date-time subtitle svelte-1lb7jbv"),v(R,"class","session-header svelte-1lb7jbv"),v(H,"class","detail svelte-1lb7jbv")},m(o,k){B(o,l,k),a(l,n),a(n,s),a(s,f),a(f,g),a(n,_),a(n,e),a(e,t),a(t,r),a(l,w),a(l,C),a(C,A),a(C,d),a(C,h);for(let j=0;j<I.length;j+=1)I[j]&&I[j].m(h,null);B(o,N,k),B(o,H,k),a(H,R),a(R,q),a(q,J),a(R,Y),a(R,L),a(L,V),a(V,Z),a(V,U),a(L,K),a(L,O),a(O,X),a(O,le),a(H,ne),M&&M.m(H,null)},p(o,k){if(k&4&&p!==(p=o[2].title+"")&&W(g,p),k&4&&!ve(t.src,D=o[2].url)&&v(t,"src",D),k&4&&T!==(T=o[2].thumbnail)&&v(t,"poster",T),k&60){Q=ge(o[3]);let j;for(j=0;j<Q.length;j+=1){const x=Ee(o,Q,j);I[j]?I[j].p(x,k):(I[j]=Te(x),I[j].c(),I[j].m(h,null))}for(;j<I.length;j+=1)I[j].d(1);I.length=Q.length}k&2&&F!==(F=o[1].title+"")&&W(J,F),k&2&&P!==(P=(je[o[1].start.split("T")[0]]??o[1].start.split("T")[0])+"")&&W(U,P),k&2&&$!==($=o[1].start.split("T")[1].split("+")[0]+" - "+o[1].end.split("T")[1].split("+")[0])&&W(le,$),o[1].objectives.length>0?M?M.p(o,k):(M=ke(o),M.c(),M.m(H,null)):M&&(M.d(1),M=null)},d(o){o&&(c(l),c(N),c(H)),Ae(I,o),M&&M.d()}}}function Te(i){let l,n,s,f,p,g,_,e,t,r=i[13].title+"",D,T,w,C,A=i[13].start+"",E,d,h,N='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="svg-icon svelte-1lb7jbv" xmlns="http://www.w3.org/2000/svg"><path d="M11 5C11 4.44772 11.4477 4 12 4C12.5523 4 13 4.44772 13 5V12.1578L16.2428 8.91501L17.657 10.3292L12.0001 15.9861L6.34326 10.3292L7.75748 8.91501L11 12.1575V5Z" fill="currentColor" class="svelte-1lb7jbv"></path><path d="M4 14H6V18H18V14H20V18C20 19.1046 19.1046 20 18 20H6C4.89543 20 4 19.1046 4 18V14Z" fill="currentColor" class="svelte-1lb7jbv"></path></svg> <div class="svelte-1lb7jbv">T√©l√©charger</div>',H,R,q,F;function J(){return i[6](i[13])}function Y(){return i[7](i[13])}return{c(){l=u("div"),n=u("div"),s=u("img"),g=y(),_=u("div"),e=u("div"),t=u("strong"),D=G(r),T=y(),w=u("div"),C=u("span"),E=G(A),d=y(),h=u("button"),h.innerHTML=N,H=y(),this.h()},l(L){l=b(L,"DIV",{class:!0});var V=m(l);n=b(V,"DIV",{class:!0});var Z=m(n);s=b(Z,"IMG",{class:!0,src:!0,alt:!0}),Z.forEach(c),g=S(V),_=b(V,"DIV",{class:!0});var P=m(_);e=b(P,"DIV",{class:!0});var U=m(e);t=b(U,"STRONG",{class:!0});var K=m(t);D=z(K,r),K.forEach(c),U.forEach(c),T=S(P),w=b(P,"DIV",{class:!0});var O=m(w);C=b(O,"SPAN",{class:!0});var X=m(C);E=z(X,A),X.forEach(c),d=S(O),h=b(O,"BUTTON",{type:!0,title:!0,class:!0,"data-svelte-h":!0}),ee(h)!=="svelte-okigmr"&&(h.innerHTML=N),O.forEach(c),P.forEach(c),H=S(V),V.forEach(c),this.h()},h(){v(s,"class","thumbnail svelte-1lb7jbv"),ve(s.src,f=i[13].thumbnail)||v(s,"src",f),v(s,"alt",p=i[13].title),v(n,"class","thumbnail-container svelte-1lb7jbv"),v(t,"class","svelte-1lb7jbv"),v(e,"class","svelte-1lb7jbv"),v(C,"class","svelte-1lb7jbv"),v(h,"type","button"),v(h,"title","T√©l√©charger"),v(h,"class","btn-download svelte-1lb7jbv"),v(w,"class","subtitle svelte-1lb7jbv"),v(_,"class","video-details svelte-1lb7jbv"),v(l,"class",R="playlist-item "+(i[13]==i[2]?"selected":"")+" svelte-1lb7jbv")},m(L,V){B(L,l,V),a(l,n),a(n,s),a(l,g),a(l,_),a(_,e),a(e,t),a(t,D),a(_,T),a(_,w),a(w,C),a(C,E),a(w,d),a(w,h),a(l,H),q||(F=[pe(h,"click",J),pe(l,"click",Y)],q=!0)},p(L,V){i=L,V&8&&!ve(s.src,f=i[13].thumbnail)&&v(s,"src",f),V&8&&p!==(p=i[13].title)&&v(s,"alt",p),V&8&&r!==(r=i[13].title+"")&&W(D,r),V&8&&A!==(A=i[13].start+"")&&W(E,A),V&12&&R!==(R="playlist-item "+(i[13]==i[2]?"selected":"")+" svelte-1lb7jbv")&&v(l,"class",R)},d(L){L&&c(l),q=!1,Me(F)}}}function ke(i){let l,n,s="Objectifs :",f,p,g,_=i[1].objectives.join("")+"";return{c(){l=u("div"),n=u("strong"),n.textContent=s,f=y(),p=u("div"),g=new Re(!1),this.h()},l(e){l=b(e,"DIV",{class:!0});var t=m(l);n=b(t,"STRONG",{class:!0,"data-svelte-h":!0}),ee(n)!=="svelte-1jn7qe7"&&(n.textContent=s),f=S(t),p=b(t,"DIV",{class:!0});var r=m(p);g=Ne(r,!1),r.forEach(c),t.forEach(c),this.h()},h(){v(n,"class","svelte-1lb7jbv"),g.a=null,v(p,"class","svelte-1lb7jbv"),v(l,"class","objectives svelte-1lb7jbv")},m(e,t){B(e,l,t),a(l,n),a(l,f),a(l,p),g.m(_,p)},p(e,t){t&2&&_!==(_=e[1].objectives.join("")+"")&&g.p(_)},d(e){e&&c(l)}}}function Fe(i){let l,n,s,f,p='<i class="gg-chevron-left svelte-1lb7jbv"></i> Retour',g,_;de.title=l=i[1]?i[1].title:"JFR 2023";let e=i[0]&&Ve(),t=!i[0]&&i[1]&&De(i);return{c(){n=y(),s=u("main"),f=u("a"),f.innerHTML=p,g=y(),e&&e.c(),_=y(),t&&t.c(),this.h()},l(r){Se("svelte-4fbbz6",de.head).forEach(c),n=S(r),s=b(r,"MAIN",{class:!0});var T=m(s);f=b(T,"A",{href:!0,class:!0,"data-svelte-h":!0}),ee(f)!=="svelte-1su23mt"&&(f.innerHTML=p),g=S(T),e&&e.l(T),_=S(T),t&&t.l(T),T.forEach(c),this.h()},h(){v(f,"href",Ie+"/"),v(f,"class","one-liner svelte-1lb7jbv"),v(s,"class","svelte-1lb7jbv")},m(r,D){B(r,n,D),B(r,s,D),a(s,f),a(s,g),e&&e.m(s,null),a(s,_),t&&t.m(s,null)},p(r,[D]){D&2&&l!==(l=r[1]?r[1].title:"JFR 2023")&&(de.title=l),r[0]?e||(e=Ve(),e.c(),e.m(s,_)):e&&(e.d(1),e=null),!r[0]&&r[1]?t?t.p(r,D):(t=De(r),t.c(),t.m(s,null)):t&&(t.d(1),t=null)},i:me,o:me,d(r){r&&(c(n),c(s)),e&&e.d(),t&&t.d()}}}function Ge(i,l,n){let s;He(i,Pe,E=>n(10,s=E));const f=s.url.searchParams;let p;f&&(p=f.get("id"));let g=!0,_,e,t,r=[];const D=E=>{var d=new XMLHttpRequest;return d.open("HEAD",E,!1),d.send(),d.status!=404},T=E=>{n(2,t=E)},w=(E,d)=>{const h=document.createElement("a");h.href=d;const N=d.split("."),H="."+N[N.length-1];h.download=qe(E)+H,h.target="_blank",document.body.appendChild(h),h.click(),document.body.removeChild(h)};return Le(async()=>{_=await(await fetch(`${Ie}/json/${p}.json`)).json(),n(1,e=_.data.event);for(const d of e.schedule.items)d.vod&&d.vod.media&&d.vod.media.element&&d.vod.media.element.sources&&r.push({id:d.vod.media.id,title:d.vod.media.id?d.title:`${d.title} üêµ`,url:d.vod.media.element.sources[0].uri,thumbnail:d.vod.media.thumbnail,start:d.start.split("T")[1].split("+")[0]});if(e.vod&&e.vod.media&&e.vod.media.element&&e.vod.media.element.sources&&r.push({id:e.vod.media.id,title:e.vod.media.title??"[Sans titre]",url:e.vod.media.element.sources[0].uri,thumbnail:e.vod.media.thumbnail,start:e.start.split("T")[1].split("+")[0]}),e.picture){const d=e.picture.split("/video/")[0]+"/video/y_1080p_4000kb.mp4";!r.some(N=>N.url===d)&&D(d)&&r.push({id:null,title:"[Unlisted Video]",url:d,thumbnail:e.picture,start:e.start.split("T")[1].split("+")[0]})}n(3,r=r.toSorted((d,h)=>d.start.localeCompare(h.start))),r.length>0&&n(2,t=r[0]),n(0,g=!1)}),[g,e,t,r,T,w,E=>w(E.title,E.url),E=>T(E)]}class Ke extends we{constructor(l){super(),ye(this,l,Ge,Fe,Ce,{})}}export{Ke as component};
